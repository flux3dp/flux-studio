{
  "name": "node-webkit-updater",
  "description": "node-webkit autoupdate library",
  "keywords": [
    "node-webkit",
    "update",
    "autoupdate"
  ],
  "version": "0.3.2",
  "author": {
    "name": "Eldar Djafarov",
    "email": "djkojb@gmail.com"
  },
  "contributors": [
    {
      "name": "Eldar Djafarov",
      "email": "djkojb@gmail.com"
    },
    {
      "name": "Adam Lynch",
      "email": "contact@adamlynch.com"
    }
  ],
  "main": "./app/updater.js",
  "repository": {
    "type": "git",
    "url": "https://github.com/edjafarov/node-webkit-updater.git"
  },
  "bugs": {
    "url": "https://github.com/edjafarov/node-webkit-updater/issues"
  },
  "homepage": "https://github.com/edjafarov/node-webkit-updater",
  "scripts": {
    "deps": "npm i && cd app && npm i && cd ..",
    "test": "node node_modules/grunt-cli/bin/grunt clean mochaTest"
  },
  "dependencies": {
    "ncp": "^0.5.1",
    "request": "~2.64.0",
    "tar.gz": "^0.1.1",
    "del": "~0.1.2",
    "semver": "^5.0.3"
  },
  "devDependencies": {
    "grunt-contrib-clean": "^0.5.0",
    "chai": "^1.9.1",
    "chokidar": "^0.8.2",
    "express": "^4.3.1",
    "grunt": "~0.4.5",
    "grunt-cli": "~0.1.13",
    "grunt-contrib-compress": "^0.9.1",
    "grunt-contrib-copy": "^0.5.0",
    "grunt-mocha-test": "^0.10.2",
    "grunt-node-webkit-builder": "~0.2.2",
    "mocha": "^1.19.0",
    "get-port": "^0.1.0",
    "grunt-jsdoc-to-markdown": "~0.4.1"
  },
  "readme": "node-webkit-updater [![NPM version][npm-image]][npm-url]\n=======\nThis is [node-webkit](https://github.com/rogerwang/node-webkit)-updater.\n\n```\nnpm install node-webkit-updater\n```\n\nIt gives you low-level API to:\n\n1. Check the manifest for version (from your running \"old\" app).\n2. If the version is different from the running one, download new package to a temp directory.\n3. Unpack the package in temp.\n4. Run new app from temp and kill the old one (i.e. still all from the running app).\n5. The new app (in temp) will copy itself to the original folder, overwriting the old app.\n6. The new app will run itself from original folder and exit the process.\n\nYou should build this logic by yourself though. As a reference you can use [example](app/index.html).\n\nCovered by tests and works for [linux](http://screencast.com/t/Je2ptbHhP), [windows](http://screencast.com/t/MSTKqVS3) and [mac](http://screencast.com/t/OXyC5xoA).\n\n## Examples\n\n- [Basic](examples/basic.js)\n\n\n## API\n\n<a name=\"new_updater\"></a>\n####new updater(manifest, options)\nCreates new instance of updater. Manifest could be a `package.json` of project.\r\rNote that compressed apps are assumed to be downloaded in the format produced by [node-webkit-builder](https://github.com/mllrsohn/node-webkit-builder) (or [grunt-node-webkit-builder](https://github.com/mllrsohn/grunt-node-webkit-builder)).\n\n**Params**\n\n- manifest `object` - See the [manifest schema](#manifest-schema) below.  \n- options `object` - Optional  \n\n<a name=\"updater#checkNewVersion\"></a>\n####updater.checkNewVersion(cb)\nWill check the latest available version of the application by requesting the manifest specified in `manifestUrl`.\r\rThe callback will always be called; the second parameter indicates whether or not there's a newer version.\rThis function assumes you use [Semantic Versioning](http://semver.org) and enforces it; if your local version is `0.2.0` and the remote one is `0.1.23456` then the callback will be called with `false` as the second paramter. If on the off chance you don't use semantic versioning, you could manually download the remote manifest and call `download` if you're happy that the remote version is newer.\n\n**Params**\n\n- cb `function` - Callback arguments: error, newerVersionExists (`Boolean`), remoteManifest  \n\n<a name=\"updater#download\"></a>\n####updater.download(cb, newManifest)\nDownloads the new app to a template folder\n\n**Params**\n\n- cb `function` - called when download completes. Callback arguments: error, downloaded filepath  \n- newManifest `Object` - see [manifest schema](#manifest-schema) below  \n\n**Returns**: `Request` - Request - stream, the stream contains `manifest` property with new manifest and 'content-length' property with the size of package.  \n<a name=\"updater#getAppPath\"></a>\n####updater.getAppPath()\nReturns executed application path\n\n**Returns**: `string`  \n<a name=\"updater#getAppExec\"></a>\n####updater.getAppExec()\nReturns current application executable\n\n**Returns**: `string`  \n<a name=\"updater#unpack\"></a>\n####updater.unpack(filename, cb, manifest)\nWill unpack the `filename` in temporary folder.\rFor Windows, [unzip](https://www.mkssoftware.com/docs/man1/unzip.1.asp) is used (which is [not signed](https://github.com/edjafarov/node-webkit-updater/issues/68)).\n\n**Params**\n\n- filename `string`  \n- cb `function` - Callback arguments: error, unpacked directory  \n- manifest `object`  \n\n<a name=\"updater#runInstaller\"></a>\n####updater.runInstaller(appPath, args, options)\nRuns installer\n\n**Params**\n\n- appPath `string`  \n- args `array` - Arguments which will be passed when running the new app  \n- options `object` - Optional  \n\n**Returns**: `function`  \n<a name=\"updater#install\"></a>\n####updater.install(copyPath, cb)\nInstalls the app (copies current application to `copyPath`)\n\n**Params**\n\n- copyPath `string`  \n- cb `function` - Callback arguments: error  \n\n<a name=\"updater#run\"></a>\n####updater.run(execPath, args, options)\nRuns the app from original app executable path.\n\n**Params**\n\n- execPath `string`  \n- args `array` - Arguments passed to the app being ran.  \n- options `object` - Optional. See `spawn` from nodejs docs.\r\rNote: if this doesn't work, try `gui.Shell.openItem(execPath)` (see [node-webkit Shell](https://github.com/rogerwang/node-webkit/wiki/Shell)).  \n\n\n---\n\n## Manifest Schema\n\nAn example manifest:\n\n```json\n{\n    \"name\": \"updapp\",\n    \"version\": \"0.0.2\",\n    \"author\": \"Eldar Djafarov <djkojb@gmail.com>\",\n    \"manifestUrl\": \"http://localhost:3000/package.json\",\n    \"packages\": {\n        \"mac\": {\n           \"url\": \"http://localhost:3000/releases/updapp/mac/updapp.zip\"\n        },\n        \"win\": {\n           \"url\": \"http://localhost:3000/releases/updapp/win/updapp.zip\"\n        },\n        \"linux32\": {\n           \"url\": \"http://localhost:3000/releases/updapp/linux32/updapp.tar.gz\"\n        }\n    }\n}\n```\n\nThe manifest could be a `package.json` of project, but doesn't have to be.\n\n### manifest.name\n\nThe name of your app. From time, it is assumed your Mac app is called `<manifest.name>.app`, your Windows executable is `<manifest.name>.exe`, etc.\n\n### manifest.version\n[semver](http://semver.org) version of your app.\n\n### manifest.manifestUrl\nThe URL where your latest manifest is hosted; where node-webkit-updater looks to check if there is a newer version of your app available.\n\n### manifest.packages\nAn \"object\" containing an object for each OS your app (at least this version of your app) supports; `mac`, `win`, `linux32`, `linux64`.\n\n### manifest.packages.{mac, win, linux32, linux64}.url\nEach package has to contain a `url` property pointing to where the app (for the version & OS in question) can be downloaded.\n\n### manifest.packages.{mac, win, linux32, linux64}.execPath (Optional)\nIt's assumed your app is stored at the root of your package, use this to override that and specify a path (relative to the root of your package).\n\nThis can also be used to override `manifest.name`; e.g. if your `manifest.name` is `helloWorld` (therefore `helloWorld.app` on Mac) but your Windows executable is named `nw.exe`. Then you'd set `execPath` to `nw.exe`\n\n---\n\n## Troubleshooting\n\nIf you get an error on Mac about too many files being open, run `ulimit -n 10240`\n\n## Contributing\n\nSee [CONTRIBUTING.md](CONTRIBUTING.md)\n\n[npm-url]: https://npmjs.org/package/node-webkit-updater\n[npm-image]: https://badge.fury.io/js/node-webkit-updater.png\n",
  "readmeFilename": "README.md",
  "_id": "node-webkit-updater@0.3.2",
  "_from": "node-webkit-updater@"
}
